{% extends "homepage/base.html" %}
{% load static %}

{% block title %}eCitizen Services | CyberConnect{% endblock %}

{% block content %}

<section class="p-6 sm:p-10 bg-white rounded-md shadow-md animate-fadeIn text-green-900">

  <!-- ðŸŽŠ Centered Falling Confetti -->
  <div class="relative flex justify-center items-center w-full h-24 sm:h-28 overflow-hidden mb-3">
    <div class="confetti-container flex justify-center items-center">
      <span class="confetti text-6xl sm:text-5xl">ðŸŽŠ</span>
    </div>
  </div>

  <style>
    .confetti-container { position: relative; display: flex; justify-content: center; gap: 10px; }
    .confetti { opacity: 0.9; animation: confetti-drop 3s ease-in-out infinite; }
    @keyframes confetti-drop {
      0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(60px) rotate(360deg); opacity: 0; }
    }
    .confetti:nth-child(1) { animation-delay: 0s; }
    .confetti:nth-child(2) { animation-delay: 0.4s; }
    .confetti:nth-child(3) { animation-delay: 0.8s; }
    .confetti:nth-child(4) { animation-delay: 1.2s; }
    .confetti:nth-child(5) { animation-delay: 1.6s; }
  </style>

  <!-- Title -->
  <h1 class="text-yellow-500 text-3xl sm:text-4xl font-Lobster mb-6 text-center">
    Welcome to eCitizen Services Dashboard
  </h1>

  <!-- Banner -->
  <div class="flex flex-col md:flex-row items-left justify-center bg-gradient-to-r from-green-700 to-green-600 text-white rounded-2xl p-6 md:p-10 mb-10 shadow-xl animate-fadeIn space-y-6 md:space-y-0 md:space-x-0">
    <div class="w-full ml-3 text-center text-black">
      <h2 class="text-2xl md:text-3xl font-bold mb-3">
        <span class="text-black font-bold">At Online CyberConnect</span>,
      </h2>
      <p class="text-base md:text-lg leading-relaxed">
        We offer trusted <span class="text-yellow-500 font-bold">eCitizen and online services</span> â€”
        including registrations, renewals, and government applications.
      </p>
      <p class="mt-4 text-base md:text-lg font-medium">
        Select a service below to add into your cart & continue.
      </p>
    </div>
  </div>

  <!-- Combined Services Section
   This is a storefront which are rendered from views for User navigation -->

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 sm:gap-6 lg:gap-8">

    {% for service in services %} <!--this loops through all services that i sents from the view.py-->
      <div class="service-card bg-white border-2 border-green-500 rounded-xl py-2 px-5 w-18 h-16 shadow-sm hover:shadow-md hover:-translate-y-1 transition duration-300 overflow-hidden opacity-0 translate-y-4">
        <img src="{% static service.image %}" alt="{{ service.name }}" class="w-16 h-20 mx-auto object-contain bg-white p-3 rounded-lg">
        <div class="p-4">
          <h3 class="text-xl font-semibold mb-2 text-green-800 text-center">{{ service.name }}</h3>
          <p class="text-sm text-black mb-3 text-center">{{ service.description }}</p>
          
          <!--this diplays the service and price in each grid item-->
          {% if service.price %}
            <p class="text-center text-lg text-black font-bold mb-3">KSh {{ service.price }}</p>
          {% endif %}
          <div class="flex justify-center">
            <a href="{% url 'service_detail' service.id %}?access={{ service.slug }}"
               class="px-4 py-2 bg-yellow-500 text-white rounded-md font-semibold hover:bg-green-800 transition">
              Request Service
            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Other Online Services ....This is another dynamic loop, but for a different set of services â€” maybe the ones stored in your database.-->
  {% if other_services %}
  <h2 class="text-2xl font-bold text-green-800 mt-10 mb-4">Other Online Services</h2>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 sm:gap-6 lg:gap-8">
    {% for s in other_services %}
      <div class="service-card bg-white border border-green-500 rounded-xl shadow-sm hover:shadow-md hover:-translate-y-1 transition duration-300 overflow-hidden">
        <img src="{{ s.image.url }}" alt="{{ s.name }}" class="w-full h-36 object-cover">
        <div class="p-4">
          <h3 class="text-xl font-semibold mb-2 text-green-800 text-center">{{ s.name }}</h3>
          <p class="text-sm text-black mb-3 text-center">{{ s.description }}</p>
          <p class="text-center text-green-700 font-bold mb-3">KSh {{ s.price }}</p>
          <div class="flex justify-center">
            <a href="{% url 'service_detail' s.id %}"
               class="px-4 py-2 bg-yellow-500 text-white rounded-md font-semibold hover:bg-green-800 transition">
              Request Service
            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  {% endif %}

</section>

{% endblock %}
